{% extends 'base.html' %}

{% block title %} Home {% endblock %}

{% block body %}

<!-- Hero Section -->
<section id="home" class="hero">
  <div class="hero-text">
    <h2>Welcome to GiftShop!</h2>
    <p>Your favorite destination for top-quality PAGE products.</p>
    {% if current_user.is_authenticated %}
      <p>You can use our chatbot.</p>
      <a href="/chatbox" class="shop-now">Chat Bot</a>
    {% else %}
      <p>Login to have access to amazing products and our chatbot</p>
    {% endif %}
  </div>
</section>

<!-- Product Grid -->
<div class="container text-center">
  <div class="row" style="margin: 3px; background-color: rgb(219, 218, 218);" id="column">

    {% for item in items.items %}
    <div class="col" style="background-color: white;">
      <img src="{{ url_for('get_image', filename=item.product_picture|replace('./media/', '') ) }}" alt="" style="height: 202px; width: 180px; border-radius: 10px;">
      <div class="row" style="margin-top: 5px;">
        <h6 style="color: gray;">{{ item.product_name }}</h6>
      </div>
      <div class="row" style="margin-top: 10px;">
        <div class="col">
          <h5 style="font-weight: 600; font-family: 'Times New Roman', Times, serif;">USD {{ item.price }}</h5>
        </div>
        <div class="col">
          <a href="/add-to-cart/{{ item.product_id }}">Add</a>
        </div>
      </div>
      <div class="row">
        <p>{{ item.stock_quantity }} Items Left</p>
      </div>
    </div>
    {% endfor %}

  </div>

  <!-- Pagination Controls -->
 <nav>
  <ul class="pagination justify-content-center mt-4">
    {% if items.has_prev %}
      <li class="page-item">
        <a class="page-link" href="{{ url_for('views.home', page=items.prev_num) }}">&laquo;</a>
      </li>
    {% else %}
      <li class="page-item disabled">
        <span class="page-link">&laquo;</span>
      </li>
    {% endif %}

    {% for p in range(1, items.pages + 1) %}
      <li class="page-item {% if p == items.page %}active{% endif %}">
        <a class="page-link" href="{{ url_for('views.home', page=p) }}">{{ p }}</a>
      </li>
    {% endfor %}

    {% if items.has_next %}
      <li class="page-item">
        <a class="page-link" href="{{ url_for('views.home', page=items.next_num) }}">&raquo;</a>
      </li>
    {% else %}
      <li class="page-item disabled">
        <span class="page-link">&raquo;</span>
      </li>
    {% endif %}
  </ul>
</nav>
</div>

{% endblock %}